version: "3.9"

services:
  web:
    build: ./web
    container_name: mcp-web
    ports:
      - "9000:9000"
    env_file:
      - .env          # ← .env 읽어서 컨테이너 환경변수로 넣기
    restart: unless-stopped

  mcp:
    build: ./mcp
    container_name: mcp-server
    depends_on:
      - web
    ports:
      - "9100:9100"
    env_file:
      - .env          # ← 동일하게 .env 사용
    restart: unless-stopped

  # agent:
  #   build: ./agent
  #   container_name: mcp-agent
  #   depends_on:
  #     - mcp
  #   restart: unless-stopped
